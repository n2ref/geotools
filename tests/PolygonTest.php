<?php

use PHPUnit\Framework\TestCase;

require_once __DIR__ . '/../src/Polygon.php';


/**
 * Class PolygonTest
 */
class PolygonTest extends TestCase {

    public function test__construct() {

    }


    public function testGetArea() {

    }


    public function testGetSegments() {

    }


    public function testGetCoordinates() {

    }


    /**
     * @param array $polygon_coordinates
     * @param array $bounds
     * @dataProvider providerGetBounds
     */
    public function testGetBounds($polygon_coordinates, $bounds) {

        $polygon = new \GeoTools\Polygon($polygon_coordinates);

        $result_bounds = $polygon->getBounds();

        $this->assertEquals($bounds, $result_bounds);
    }


    /**
     * @param array $polygon_coordinates
     * @param array $center
     * @dataProvider providerGetCenter
     */
    public function testGetCenter($polygon_coordinates, $center) {

        $polygon = new \GeoTools\Polygon($polygon_coordinates);

        $result_center = $polygon->getCenter();

        $this->assertEquals(round($center[0], 3), round($result_center->getLat(), 3));
        $this->assertEquals(round($center[1], 3), round($result_center->getLng(), 3));
    }


    /**
     *
     */
    public function testTriangulation() {

    }


    public function testGetFillPoints() {

    }


    public function testIsContainsPoint() {

    }


    public function testIsContainsPolygon() {

    }


    /**
     * @return array
     */
    public function providerGetCenter() {

        return [
            [
                [
                    ['59.2192164008285', '39.823476483932176'],
                    ['59.21618014179259', '39.823776891341836'],
                    ['59.21674121004697', '39.83463447343408'],
                    ['59.2172197609596', '39.844901969543045'],
                    ['59.22076467853722', '39.844231417289336'],
                    ['59.22011842556126', '39.82901256333891'],
                    ['59.2192164008285', '39.823476483932176']
                ],
                ['59.218472487405', '39.834189226738']
            ],
            [
                [
                    ['-6.826599519083694', '110.8101224899292'],
                    ['-6.82387240136356', '110.81316947937012'],
                    ['-6.82617340796409', '110.81651687622069'],
                    ['-6.829795340386739', '110.8152723312378'],
                    ['-6.829923172794863', '110.81162452697752'],
                    ['-6.826599519083694', '110.8101224899292']
                ],
                ['-6.827272768318589', '110.81334114074707']
            ],
            [
                [
                    [3.5, 6],
                    [6, 4],
                    [5, 1],
                    [2, 1],
                    [1, 4],
                    [3.5, 6]
                ],
                ['3.5', '3.225']
            ],
            [
                [
                    [1, 2],
                    [4, 5],
                    [5, 1],
                    [1, 2]
                ],
                ['3.333', '2.667']
            ],
            [
                [
                    [0, 3],
                    [4, 4],
                    [3, 0],
                    [4, -4],
                    [0, -3],
                    [-4, -4],
                    [-3, 0],
                    [-4, 4],
                    [0, 3],
                ],
                [0, 0]
            ]
        ];
    }


    /**
     * @return array
     */
    public function providerGetBounds() {

        return [
            [
                [
                    ['59.2192164008285', '39.823476483932176'],
                    ['59.21618014179259', '39.823776891341836'],
                    ['59.21674121004697', '39.83463447343408'],
                    ['59.2172197609596', '39.844901969543045'],
                    ['59.22076467853722', '39.844231417289336'],
                    ['59.22011842556126', '39.82901256333891'],
                    ['59.2192164008285', '39.823476483932176']
                ],
                [['59.21618014179259', '39.823476483932176'], ['59.22076467853722', '39.844901969543045']]
            ],
            [
                [
                    ['-6.826599519083694', '110.8101224899292'],
                    ['-6.82387240136356',  '110.81316947937012'],
                    ['-6.82617340796409',  '110.81651687622069'],
                    ['-6.829795340386739', '110.8152723312378'],
                    ['-6.829923172794863', '110.81162452697752'],
                    ['-6.826599519083694', '110.8101224899292']
                ],
                [['-6.829923172794863', '110.8101224899292'], ['-6.82387240136356', '110.81651687622069']]
            ],
            [
                [
                    [3.5, 6],
                    [6, 4],
                    [5, 1],
                    [2, 1],
                    [1, 4],
                    [3.5, 6]
                ],
                [[1, 1], [6, 6]]
            ],
            [
                [
                    [1, 2],
                    [4, 5],
                    [5, 1],
                    [1, 2]
                ],
                [[1, 1], [5, 5]]
            ],
            [
                [
                    [0, 3],
                    [4, 4],
                    [3, 0],
                    [4, -4],
                    [0, -3],
                    [-4, -4],
                    [-3, 0],
                    [-4, 4],
                    [0, 3],
                ],
                [[-4, -4], [4, 4]]
            ]
        ];
    }

    /**
     * @return array
     */
    public function providerGetTriangles() {

        return [
            [
                [
                    [
                        ["53.85485688940079","27.474436845947274"],["53.87555548261344","27.47306355493165"],
                        ["53.88082994908635","27.48370656030274"],["53.87778706923632","27.490573015380853"],
                        ["53.87535260516928","27.492976274658204"],["53.8721064315793","27.491259660888666"],
                        ["53.87332377634132","27.48439320581055"],["53.86886000483695","27.479930010009763"],
                        ["53.86683085956482","27.481303301025388"],["53.863381085639936","27.487483110595715"],
                        ["53.860133978503406","27.494692888427746"],["53.85445093177627","27.49915608422851"],
                        ["53.84897011661313","27.495036211181638"],["53.84409767555927","27.485766496826173"],
                        ["53.84206732362508","27.477526750732412"],["53.843082511957284","27.45898732202148"],
                        ["53.84490978863527","27.45727070825196"],["53.851203128351116","27.455210771728527"],
                        ["53.85505986672945","27.45589741723634"],["53.859119205600464","27.4603606130371"],
                        ["53.85485688940079","27.474436845947274"],
                    ]
                ],
                [
                    [[["53.87535260516928","27.492976274658204"],["53.87332377634132","27.48439320581055"],["53.87778706923632","27.490573015380853"],["53.87535260516928","27.492976274658204"]]],
                    [[["53.87535260516928","27.492976274658204"],["53.87332377634132","27.48439320581055"],["53.8721064315793","27.491259660888666"],["53.87535260516928","27.492976274658204"]]],
                    [[["53.87332377634132","27.48439320581055"],["53.87778706923632","27.490573015380853"],["53.88082994908635","27.48370656030274"],["53.87332377634132","27.48439320581055"]]],
                    [[["53.87332377634132","27.48439320581055"],["53.87555548261344","27.47306355493165"],["53.86886000483695","27.479930010009763"],["53.87332377634132","27.48439320581055"]]],
                    [[["53.87332377634132","27.48439320581055"],["53.87555548261344","27.47306355493165"],["53.88082994908635","27.48370656030274"],["53.87332377634132","27.48439320581055"]]],
                    [[["53.87555548261344","27.47306355493165"],["53.86886000483695","27.479930010009763"],["53.86683085956482","27.481303301025388"],["53.87555548261344","27.47306355493165"]]],
                    [[["53.851203128351116","27.455210771728527"],["53.843082511957284","27.45898732202148"],["53.84490978863527","27.45727070825196"],["53.851203128351116","27.455210771728527"]]],
                    [[["53.851203128351116","27.455210771728527"],["53.843082511957284","27.45898732202148"],["53.85485688940079","27.474436845947274"],["53.851203128351116","27.455210771728527"]]],
                    [[["53.851203128351116","27.455210771728527"],["53.859119205600464","27.4603606130371"],["53.85505986672945","27.45589741723634"],["53.851203128351116","27.455210771728527"]]],
                    [[["53.851203128351116","27.455210771728527"],["53.859119205600464","27.4603606130371"],["53.85485688940079","27.474436845947274"],["53.851203128351116","27.455210771728527"]]],
                    [[["53.87555548261344","27.47306355493165"],["53.86683085956482","27.481303301025388"],["53.85485688940079","27.474436845947274"],["53.87555548261344","27.47306355493165"]]],
                    [[["53.860133978503406","27.494692888427746"],["53.84897011661313","27.495036211181638"],["53.85445093177627","27.49915608422851"],["53.860133978503406","27.494692888427746"]]],
                    [[["53.860133978503406","27.494692888427746"],["53.84897011661313","27.495036211181638"],["53.85485688940079","27.474436845947274"],["53.860133978503406","27.494692888427746"]]],
                    [[["53.863381085639936","27.487483110595715"],["53.85485688940079","27.474436845947274"],["53.86683085956482","27.481303301025388"],["53.863381085639936","27.487483110595715"]]],
                    [[["53.863381085639936","27.487483110595715"],["53.85485688940079","27.474436845947274"],["53.860133978503406","27.494692888427746"],["53.863381085639936","27.487483110595715"]]],
                    [[["53.84206732362508","27.477526750732412"],["53.84897011661313","27.495036211181638"],["53.84409767555927","27.485766496826173"],["53.84206732362508","27.477526750732412"]]],
                    [[["53.84206732362508","27.477526750732412"],["53.84897011661313","27.495036211181638"],["53.85485688940079","27.474436845947274"],["53.84206732362508","27.477526750732412"]]],
                    [[["53.85485688940079","27.474436845947274"],["53.84206732362508","27.477526750732412"],["53.843082511957284","27.45898732202148"],["53.85485688940079","27.474436845947274"]]],
                ]
            ],
            [
                [
                    [
                        ["53.87596123453522","27.659831133056652"],["53.85658434054471","27.74005814087611"],
                        ["53.82155522360711","27.69656666772457"],["53.86175756371255","27.57400044458005"],
                        ["53.87596123453522","27.659831133056652"]
                    ],
                    [
                        [
                            ["53.8692658220174","27.646441545654266"],["53.86236639185024","27.67871388452145"],
                            ["53.8438946448087","27.647471513915946"],["53.859119205597054","27.599063005615204"],
                            ["53.8692658220174","27.646441545654266"]
                        ]
                    ]
                ],
                [
                    [[["53.8692658220174","27.646441545654266"],["53.87596123453522","27.659831133056652"],["53.86236639185024","27.67871388452145"],["53.8692658220174","27.646441545654266"]]],
                    [[["53.8692658220174","27.646441545654266"],["53.87596123453522","27.659831133056652"],["53.859119205597054","27.599063005615204"],["53.8692658220174","27.646441545654266"]]],
                    [[["53.859119205597054","27.599063005615204"],["53.86175756371255","27.57400044458005"],["53.8438946448087","27.647471513915946"],["53.859119205597054","27.599063005615204"]]],
                    [[["53.859119205597054","27.599063005615204"],["53.86175756371255","27.57400044458005"],["53.87596123453522","27.659831133056652"],["53.859119205597054","27.599063005615204"]]],
                    [[["53.87596123453522","27.659831133056652"],["53.86236639185024","27.67871388452145"],["53.85658434054471","27.74005814087611"],["53.87596123453522","27.659831133056652"]]],
                    [[["53.82155522360711","27.69656666772457"],["53.8438946448087","27.647471513915946"],["53.86175756371255","27.57400044458005"],["53.82155522360711","27.69656666772457"]]],
                    [[["53.82155522360711","27.69656666772457"],["53.8438946448087","27.647471513915946"],["53.86236639185024","27.67871388452145"],["53.82155522360711","27.69656666772457"]]],
                    [[["53.85658434054471","27.74005814087611"],["53.86236639185024","27.67871388452145"],["53.82155522360711","27.69656666772457"],["53.85658434054471","27.74005814087611"]]],
                ]
            ],
            [
                [
                    [
                        [["53.8915796761685","27.428603258300782"],["53.911854617186","27.44988926904296"],["53.916719132174904","27.408690538574223"],["53.8915796761685","27.428603258300782"]]
                    ]
                ],
                [
                    [[["53.8915796761685","27.428603258300782"],["53.911854617186","27.44988926904296"],["53.916719132174904","27.408690538574223"],["53.8915796761685","27.428603258300782"]]]
                ]
            ]
        ];
    }


    public function providerGetFillPoints() {

        return [
            [
                [[
                    ["53.85485688940079","27.474436845947274"],["53.87555548261344","27.47306355493165"],
                    ["53.88082994908635","27.48370656030274"],["53.87778706923632","27.490573015380853"],
                    ["53.87535260516928","27.492976274658204"],["53.8721064315793","27.491259660888666"],
                    ["53.87332377634132","27.48439320581055"],["53.86886000483695","27.479930010009763"],
                    ["53.86683085956482","27.481303301025388"],["53.863381085639936","27.487483110595715"],
                    ["53.860133978503406","27.494692888427746"],["53.85445093177627","27.49915608422851"],
                    ["53.84897011661313","27.495036211181638"],["53.84409767555927","27.485766496826173"],
                    ["53.84206732362508","27.477526750732412"],["53.843082511957284","27.45898732202148"],
                    ["53.84490978863527","27.45727070825196"],["53.851203128351116","27.455210771728527"],
                    ["53.85505986672945","27.45589741723634"],["53.859119205600464","27.4603606130371"],
                    ["53.85485688940079","27.474436845947274"]
                ]],
                30,
                [[53.87548782268,27.48931416826], [53.873594119499,27.489542969754], [53.877313532682,27.486224227072],
                 [53.872579728617,27.479128910384],[53.876569722041,27.480387766537],[53.870415164941,27.478098810077],
                 [53.846398197143,27.457156124959],[53.849714196585,27.462878323427],[53.855127258508,27.457156195094],
                 [53.855059715977,27.463336064079],[53.865747763924,27.476267910857],[53.854518248418,27.496295013357],
                 [53.85465366674,27.488055317867],[53.861689565908,27.481074395916],[53.859457317269,27.485537614694],
                 [53.845045171413,27.486109887443],[53.848631449639,27.482333272546],[53.84666889585,27.470316966531],
                 [53.874744257477,27.488284361597],[53.876231388039,27.490343974794],[53.873932257675,27.490973481265],
                 [53.873255981313,27.488112458226],[53.878564726566,27.486109870455],[53.876062503972,27.486338667977],
                 [53.873695641597,27.477984501214],[53.871463950598,27.480273388327],[53.875690693251,27.478613957234],
                 [53.87744884863,27.482161625692],[53.868961060777,27.479472100962],[53.871869268605,27.476725518693]]
            ]
        ];
    }
}
